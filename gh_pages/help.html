<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Discord2Html ヘルプ (/d2h コマンド)</title>
  <link rel="stylesheet" href="/Discord2Html/css/style.css" />
  <link rel="icon" href="/Discord2Html/D2H_logo.png" />
</head>
<body>
<div class="container">
  <header class="guild-header">
    <img class="guild-icon" src="/Discord2Html/D2H_logo.png" alt="D2H ロゴ" />
    <h1>Discord2Html ヘルプ</h1>
  </header>
  <p>このページは Discord のスラッシュコマンド <code>/d2h</code> 群の使い方を説明します。</p>

  <div class="note">
    <ul>
      <li>コマンドはサーバーチャンネルでのみ使用できます（DMでは不可）。</li>
      <li>ボット設定で <strong>管理タグ付きチャンネル</strong> のみ実行可能です。</li>
      <li>ほとんどのコマンドは <strong>管理者権限（<code>D2H Admin</code>）</strong> が必要です。</li>
    </ul>
  </div>

  <h2>/d2h コマンド一覧</h2>
  <ul>
    <li>
      <div class="cmd">/d2h archive <span class="args">channel:&lt;チャンネル&gt; mode:(ignore|monitor)</span></div>
      <div class="perm">権限: 管理者のみ</div>
      <div>対象チャンネルのアーカイブ対象設定を変更します。</div>
    </li>
    <li>
      <div class="cmd">/d2h run <span class="args">[target:&lt;チャンネル&gt;]</span></div>
      <div class="perm">権限: 管理者のみ</div>
      <div>今すぐアーカイブ処理を実行します。<span class="args">target</span> を指定するとそのチャンネル、未指定時はサーバーの全対象チャンネルに対して動作します。
      </div>
    </li>
    <li>
      <div class="cmd">/d2h role <span class="args">role:&lt;ロール&gt; anonymous:(anonymous|open)</span></div>
      <div class="perm">権限: 管理者のみ</div>
      <div>指定ロール所持ユーザの匿名設定を一括で変更します。</div>
    </li>
    <li>
      <div class="cmd">/d2h schedule <span class="args">cycle:&lt;0-23&gt;</span></div>
      <div class="perm">権限: 管理者のみ</div>
      <div>サーバーの自動アーカイブ実行周期を設定します。起算時刻は 0:00 で、例: cycle=6 の場合 0, 6, 12, 18 時に実行します。<br>0を指定すると深夜0時の1回だけ実行します。</div>
    </li>
    <li>
      <div class="cmd">/d2h anonymous <span class="args">menu:cycle cycle:&lt;数値&gt;</span></div>
      <div class="perm">権限: 管理者のみ</div>
      <div>サーバーの匿名名前サイクル時間を変更します。<br>推奨レンジ: 1〜24（時間）。</div>
    </li>
    <li>
      <div class="cmd">/d2h me <span class="args">anonymous:(anonymous|open)</span></div>
      <div class="perm">権限: だれでも</div>
      <div>自分の匿名設定を変更します。</div>
    </li>
    <li>
      <div class="cmd">/d2h help</div>
      <div class="perm">権限: だれでも</div>
      <div>このヘルプを表示します。</div>
    </li>
  </ul>

  <div class="tip">
    <strong>実行場所の制限:</strong> すべてのコマンドは「管理タグ付きチャンネル」でのみ有効です。その他のチャンネルで実行すると拒否されます。
  </div>

  <h2>「管理タグ付きチャンネル」とは</h2>
  <p>
    この用語は、サーバーロール <code>D2H-admin</code> がそのチャンネルに対して
    <strong>メッセージ履歴の閲覧（Permission.MESSAGE_HISTORY）</strong> 権限を持っているかどうかで判定されます。
  </p>
  <ul>
    <li>ボット参加時に <code>D2H-admin</code> ロールが自動作成され、全チャンネルで同権限が「拒否」に初期化されます。</li>
    <li>運用者が「管理タグ」を付けたいチャンネルでは、該当チャンネルの権限設定で <code>D2H-admin</code> ロールに
      <strong>メッセージ履歴</strong> 権限を「許可」に変更してください。</li>
    <li>上記が「許可」になっているチャンネルのみが、コマンド実行可能な「管理タグ付きチャンネル」として扱われます（カテゴリーは対象外）。</li>
    <li>実務上はテキストチャンネルでの設定を推奨します。</li>
  </ul>

  <h2>アーカイブの出力</h2>
  <ul>
    <li>チャンネルごとのインデックス: <code>archives/$channel$.html</code></li>
    <li>日次一覧: <code>archive/$yyyyMMdd$/$channel$.html</code></li>
  </ul>

  <p><a href="index.html">トップへ戻る</a></p>
</div>
<footer>
  <p class="footer">
    <a href="https://github.com/yui-Kitamura/Discord2Html" target="_blank">GitHub Repository:
      yui-Kitamura/Discord2Html</a>
    <span> | bot ver1.4.3dev@8097ec1</span>
  </p>
</footer>
</body>
</html>
